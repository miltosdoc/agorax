
import { db } from "./db";
import { users } from "../shared/schema";
import { eq } from "drizzle-orm";
import { DatabaseStorage } from "./storage";

async function createGreekSurvey() {
  try {
    // Find the user by email
    const [user] = await db
      .select()
      .from(users)
      .where(eq(users.email, "miltos2006@gmail.com"))
      .limit(1);

    if (!user) {
      console.error("User with email miltos2006@gmail.com not found");
      process.exit(1);
    }

    const storage = new DatabaseStorage();

    const now = new Date();
    const endDate = new Date(now.getTime() + 30 * 24 * 60 * 60 * 1000); // 30 days from now

    const surveyData = {
      poll: {
        title: "Έρευνα Κοινής Γνώμης για Σύγχρονα Πολιτικά Ζητήματα στην Ελλάδα",
        description: "Η παρούσα έρευνα αποσκοπεί στη μέτρηση των απόψεων των πολιτών σχετικά με επίκαιρα πολιτικά ζητήματα στην Ελλάδα. Περιλαμβάνει ενότητες για τις προτεραιότητες προβλημάτων, τη διαφθορά και διαφάνεια, τις δημοκρατικές αντιλήψεις, την οικονομία/πληθωρισμό, και την τεχνητή νοημοσύνη/τεχνολογία.",
        category: "Πολιτική",
        startDate: now,
        endDate: endDate,
        visibility: "public" as const,
        showResults: true,
        allowComments: true,
        requireVerification: false,
        creatorId: user.id,
        isActive: true,
        locationScope: "global" as const,
        pollType: "surveyPoll" as const,
        allowExtension: true,
        communityMode: false,
        centerLat: null,
        centerLng: null,
        radiusKm: null,
        groupId: null
      },
      questions: [
        // Σημαντικότερα Προβλήματα
        {
          id: 1,
          text: "Κατά τη γνώμη σας, ποιο είναι το σημαντικότερο πρόβλημα που αντιμετωπίζει σήμερα η χώρα; (Επιλέξτε ένα ή δύο θέματα)",
          questionType: "multipleChoice" as const,
          required: true,
          order: 0,
          answers: [
            { id: 1, text: "Η ακρίβεια / το αυξημένο κόστος ζωής", order: 0 },
            { id: 2, text: "Η διαφθορά και η έλλειψη διαφάνειας", order: 1 },
            { id: 3, text: "Η ανεργία και η έλλειψη καλών θέσεων εργασίας", order: 2 },
            { id: 4, text: "Τα προβλήματα στο σύστημα υγείας", order: 3 },
            { id: 5, text: "Η ποιότητα της δημοκρατίας και της διακυβέρνησης", order: 4 },
            { id: 6, text: "Το μεταναστευτικό / προσφυγικό ζήτημα", order: 5 },
            { id: 7, text: "Η εγκληματικότητα και η δημόσια ασφάλεια", order: 6 },
            { id: 8, text: "Η κλιματική αλλαγή και οι περιβαλλοντικές απειλές", order: 7 },
          ],
        },
        
        // Διαφθορά και Διαφάνεια
        {
          id: 2,
          text: "Πόσο διαδεδομένη πιστεύετε ότι είναι η διαφθορά στον δημόσιο βίο της Ελλάδας;",
          questionType: "singleChoice" as const,
          required: true,
          order: 1,
          answers: [
            { id: 9, text: "Πολύ διαδεδομένη", order: 0 },
            { id: 10, text: "Αρκετά διαδεδομένη", order: 1 },
            { id: 11, text: "Λίγο διαδεδομένη", order: 2 },
            { id: 12, text: "Ελάχιστα ή καθόλου διαδεδομένη", order: 3 },
          ],
        },
        {
          id: 3,
          text: "Τα τελευταία χρόνια, η διαφθορά στην Ελλάδα έχει αυξηθεί, μειωθεί ή μείνει περίπου στα ίδια επίπεδα;",
          questionType: "singleChoice" as const,
          required: true,
          order: 2,
          answers: [
            { id: 13, text: "Έχει αυξηθεί", order: 0 },
            { id: 14, text: "Έχει παραμείνει στα ίδια επίπεδα", order: 1 },
            { id: 15, text: "Έχει μειωθεί", order: 2 },
          ],
        },
        {
          id: 4,
          text: "Πόσο θα λέγατε ότι εμπιστεύεστε την κυβέρνηση ως προς την αντιμετώπιση της διαφθοράς;",
          questionType: "singleChoice" as const,
          required: true,
          order: 3,
          answers: [
            { id: 16, text: "Τη εμπιστεύομαι πολύ στο θέμα αυτό", order: 0 },
            { id: 17, text: "Τη εμπιστεύομαι αρκετά", order: 1 },
            { id: 18, text: "Τη εμπιστεύομαι λίγο", order: 2 },
            { id: 19, text: "Δεν την εμπιστεύομαι καθόλου", order: 3 },
          ],
        },
        {
          id: 5,
          text: "Πόσο εμπιστεύεστε τα κόμματα της αντιπολίτευσης ως προς την αντιμετώπιση της διαφθοράς;",
          questionType: "singleChoice" as const,
          required: true,
          order: 4,
          answers: [
            { id: 20, text: "Τα εμπιστεύομαι πολύ", order: 0 },
            { id: 21, text: "Τα εμπιστεύομαι αρκετά", order: 1 },
            { id: 22, text: "Τα εμπιστεύομαι λίγο", order: 2 },
            { id: 23, text: "Δεν τα εμπιστεύομαι καθόλου", order: 3 },
          ],
        },
        {
          id: 6,
          text: 'Συμφωνείτε ή διαφωνείτε με την ακόλουθη δήλωση: "Όλοι οι πολιτικοί χώροι και κόμματα στην Ελλάδα είναι λίγο-πολύ διεφθαρμένοι";',
          questionType: "singleChoice" as const,
          required: true,
          order: 5,
          answers: [
            { id: 24, text: "Διαφωνώ απόλυτα", order: 0 },
            { id: 25, text: "Μάλλον διαφωνώ", order: 1 },
            { id: 26, text: "Μάλλον συμφωνώ", order: 2 },
            { id: 27, text: "Συμφωνώ απόλυτα", order: 3 },
          ],
        },
        {
          id: 7,
          text: 'Συμφωνείτε ή διαφωνείτε: "Τα μέσα μαζικής ενημέρωσης στην Ελλάδα αποκαλύπτουν και ερευνούν αποτελεσματικά τα σκάνδαλα διαφθοράς";',
          questionType: "singleChoice" as const,
          required: true,
          order: 6,
          answers: [
            { id: 28, text: "Συμφωνώ", order: 0 },
            { id: 29, text: "Ουδέτερη στάση / Δεν είμαι σίγουρος/η", order: 1 },
            { id: 30, text: "Διαφωνώ (τα ΜΜΕ δεν κάνουν επαρκή έλεγχο)", order: 2 },
          ],
        },
        {
          id: 8,
          text: 'Συμφωνείτε ή διαφωνείτε: "Οι αξιωματούχοι που εμπλέκονται σε υποθέσεις διαφθοράς συνήθως υφίστανται τις συνέπειες του νόμου";',
          questionType: "singleChoice" as const,
          required: true,
          order: 7,
          answers: [
            { id: 31, text: "Συμφωνώ (στην Ελλάδα η δικαιοσύνη τιμωρεί τους διεφθαρμένους)", order: 0 },
            { id: 32, text: "Ούτε συμφωνώ, ούτε διαφωνώ / δεν γνωρίζω", order: 1 },
            { id: 33, text: "Διαφωνώ (πολλοί μένουν ατιμώρητοι ή πέφτουν στα «μαλακά»)", order: 2 },
          ],
        },
        
        // Δημοκρατικές Αντιλήψεις
        {
          id: 9,
          text: "Γενικά, πόσο ικανοποιημένοι είστε από τον τρόπο με τον οποίο λειτουργεί η δημοκρατία στην Ελλάδα;",
          questionType: "singleChoice" as const,
          required: true,
          order: 8,
          answers: [
            { id: 34, text: "Πολύ ικανοποιημένος/η", order: 0 },
            { id: 35, text: "Αρκετά ικανοποιημένος/η", order: 1 },
            { id: 36, text: "Λίγο ικανοποιημένος/η", order: 2 },
            { id: 37, text: "Καθόλου ικανοποιημένος/η", order: 3 },
          ],
        },
        {
          id: 10,
          text: 'Συμφωνείτε ή διαφωνείτε με τη δήλωση: "Παρά τα προβλήματά της, δεν υπάρχει καλύτερο πολίτευμα από τη δημοκρατία";',
          questionType: "singleChoice" as const,
          required: true,
          order: 9,
          answers: [
            { id: 38, text: "Συμφωνώ απόλυτα", order: 0 },
            { id: 39, text: "Μάλλον συμφωνώ", order: 1 },
            { id: 40, text: "Μάλλον διαφωνώ", order: 2 },
            { id: 41, text: "Διαφωνώ απόλυτα", order: 3 },
          ],
        },
        {
          id: 11,
          text: "Θα θέλατε οι πολίτες να έχουν πιο άμεσο λόγο στη διαδικασία λήψης αποφάσεων; (π.χ. μέσω συχνότερων δημοψηφισμάτων, ψηφιακών διαβουλεύσεων ή συνελεύσεων πολιτών)",
          questionType: "singleChoice" as const,
          required: true,
          order: 10,
          answers: [
            { id: 42, text: "Ναι, σίγουρα – απαιτείται περισσότερη άμεση συμμετοχή των πολιτών", order: 0 },
            { id: 43, text: "Ναι, ίσως – θα ήταν καλό σε ορισμένες περιπτώσεις", order: 1 },
            { id: 44, text: "Όχι ιδιαίτερα – η αντιπροσωπευτική δημοκρατία αρκεί στις περισσότερες περιπτώσεις", order: 2 },
            { id: 45, text: "Όχι, σε καμία περίπτωση – οι εκλεγμένοι εκπρόσωποι πρέπει να αποφασίζουν χωρίς άμεση ανάμιξη των πολιτών", order: 3 },
          ],
        },
        {
          id: 12,
          text: "Αν το κράτος παρείχε μια ηλεκτρονική πλατφόρμα διαβούλευσης, θα συμμετείχατε σε ψηφοφορίες ή προτάσεις πολιτικής μέσω διαδικτύου;",
          questionType: "singleChoice" as const,
          required: true,
          order: 11,
          answers: [
            { id: 46, text: "Ναι, τακτικά – με ενδιαφέρει να συμμετέχω ενεργά ψηφιακά", order: 0 },
            { id: 47, text: "Ναι, περιστασιακά – θα το χρησιμοποιούσα αν αφορά σημαντικά θέματα", order: 1 },
            { id: 48, text: "Μάλλον σπάνια – δύσκολα θα έβρισκα χρόνο/ενδιαφέρον", order: 2 },
            { id: 49, text: "Όχι ποτέ – δεν εμπιστεύομαι ή δεν με ελκύουν αυτές οι μέθοδοι", order: 3 },
          ],
        },
        {
          id: 13,
          text: 'Συμφωνείτε ή διαφωνείτε: "Μερικές φορές η χώρα χρειάζεται έναν ισχυρό ηγέτη που να μπορεί να παίρνει αποφάσεις χωρίς τη σύμφωνη γνώμη της Βουλής ή τη διεξαγωγή εκλογών";',
          questionType: "singleChoice" as const,
          required: true,
          order: 12,
          answers: [
            { id: 50, text: "Συμφωνώ – σε κρίσεις ίσως απαιτείται συγκεντρωτική εξουσία", order: 0 },
            { id: 51, text: "Ούτε συμφωνώ, ούτε διαφωνώ / Δεν είμαι βέβαιος/η", order: 1 },
            { id: 52, text: "Διαφωνώ – η κοινοβουλευτική διαδικασία πρέπει πάντα να τηρείται", order: 2 },
          ],
        },
        
        // Οικονομία και Πληθωρισμός
        {
          id: 14,
          text: "Πόσο σας έχει επηρεάσει προσωπικά η αύξηση των τιμών (πληθωρισμός) τον τελευταίο χρόνο;",
          questionType: "singleChoice" as const,
          required: true,
          order: 13,
          answers: [
            { id: 53, text: "Με έχει επηρεάσει πολύ σοβαρά – δυσκολεύομαι να ανταπεξέλθω", order: 0 },
            { id: 54, text: "Με έχει επηρεάσει αρκετά – έχω περιορίσει αισθητά δαπάνες", order: 1 },
            { id: 55, text: "Με έχει επηρεάσει λίγο – κάποιες μικρές προσαρμογές αλλά αντεπεξέρχομαι", order: 2 },
            { id: 56, text: "Ελάχιστα ή καθόλου – δεν έχω αισθανθεί σημαντική διαφορά στο κόστος ζωής", order: 3 },
          ],
        },
        {
          id: 15,
          text: "Το μηνιαίο εισόδημα του νοικοκυριού σας επαρκεί για να καλύψει τις βασικές σας ανάγκες;",
          questionType: "singleChoice" as const,
          required: true,
          order: 14,
          answers: [
            { id: 57, text: "Ναι, άνετα – καλύπτει τις ανάγκες και μένει και κάποιο περίσσευμα", order: 0 },
            { id: 58, text: "Ναι, οριακά – καλύπτει τις ανάγκες, χωρίς όμως περιθώριο για επιπλέον έξοδα", order: 1 },
            { id: 59, text: "Όχι, δεν επαρκεί – αντιμετωπίζουμε δυσκολίες να καλύψουμε ακόμη και τα απαραίτητα", order: 2 },
          ],
        },
        {
          id: 16,
          text: "Πόσο ικανοποιημένοι είστε από τα μέτρα και τις πολιτικές της κυβέρνησης για την αντιμετώπιση της ακρίβειας και του πληθωρισμού;",
          questionType: "singleChoice" as const,
          required: true,
          order: 15,
          answers: [
            { id: 60, text: "Πολύ ικανοποιημένος/η", order: 0 },
            { id: 61, text: "Αρκετά ικανοποιημένος/η", order: 1 },
            { id: 62, text: "Λίγο ικανοποιημένος/η", order: 2 },
            { id: 63, text: "Καθόλου ικανοποιημένος/η", order: 3 },
          ],
        },
        {
          id: 17,
          text: "Πιστεύετε ότι τα πρόσφατα οικονομικά μέτρα που ανακοίνωσε η κυβέρνηση (π.χ. πακέτο ΔΕΘ) θα βελτιώσουν αισθητά την οικονομική κατάσταση του δικού σας νοικοκυριού;",
          questionType: "singleChoice" as const,
          required: true,
          order: 16,
          answers: [
            { id: 64, text: "Ναι, σημαντικά – αναμένω ουσιαστική οικονομική ανάσα", order: 0 },
            { id: 65, text: "Ίσως λίγο – κάποια μικρή προσωρινή ανακούφιση μόνο", order: 1 },
            { id: 66, text: "Όχι ιδιαίτερα – δεν θα έχουν αξιόλογη επίδραση στα οικονομικά μου", order: 2 },
            { id: 67, text: "Καθόλου – δεν με αφορούν / δεν θα δω κανένα όφελος", order: 3 },
          ],
        },
        {
          id: 18,
          text: "Συνολικά, πώς αξιολογείτε την τωρινή οικονομική κατάσταση της Ελλάδας;",
          questionType: "singleChoice" as const,
          required: true,
          order: 17,
          answers: [
            { id: 68, text: "Καλή – η οικονομία είναι σε καλό δρόμο", order: 0 },
            { id: 69, text: "Μέτρια – ούτε πολύ καλή αλλά ούτε και πολύ κακή", order: 1 },
            { id: 70, text: "Κακή – η οικονομική κατάσταση της χώρας είναι προβληματική", order: 2 },
            { id: 71, text: "Πολύ κακή – η οικονομία βρίσκεται σε κρίση/ύφεση", order: 3 },
          ],
        },
        {
          id: 19,
          text: "Πώς προβλέπετε ότι θα είναι η οικονομική κατάσταση του νοικοκυριού σας σε ένα χρόνο από τώρα;",
          questionType: "singleChoice" as const,
          required: true,
          order: 18,
          answers: [
            { id: 72, text: "Καλύτερη από σήμερα", order: 0 },
            { id: 73, text: "Περίπου ίδια με τη σημερινή", order: 1 },
            { id: 74, text: "Χειρότερη από σήμερα", order: 2 },
            { id: 75, text: "Δεν γνωρίζω/Δεν μπορώ να εκτιμήσω", order: 3 },
          ],
        },
        
        // Τεχνητή Νοημοσύνη και Τεχνολογία
        {
          id: 20,
          text: "Ποια είναι τα γενικά σας αισθήματα όταν ακούτε για «Τεχνητή Νοημοσύνη»;",
          questionType: "singleChoice" as const,
          required: true,
          order: 19,
          answers: [
            { id: 76, text: "Μάλλον θετικά – μου προκαλεί ενδιαφέρον, αισιοδοξία για τις δυνατότητες", order: 0 },
            { id: 77, text: "Ουδέτερα/Ανάμεικτα – τόσο θετικά όσο και αρνητικά συναισθήματα", order: 1 },
            { id: 78, text: "Μάλλον αρνητικά – με ανησυχεί ή με φοβίζει περισσότερο παρά μου δίνει ελπίδα", order: 2 },
            { id: 79, text: "Δεν έχω σαφή άποψη", order: 3 },
          ],
        },
        {
          id: 21,
          text: "Χρησιμοποιείτε προσωπικά κάποιες εφαρμογές τεχνητής νοημοσύνης; (π.χ. ChatGPT, ψηφιακοί βοηθοί, AI εργαλεία εικόνας/ήχου)",
          questionType: "singleChoice" as const,
          required: true,
          order: 20,
          answers: [
            { id: 80, text: "Ναι, τακτικά – χρησιμοποιώ AI εργαλεία συχνά στην εργασία ή/και την καθημερινότητά μου", order: 0 },
            { id: 81, text: "Ναι, περιστασιακά – έχω δοκιμάσει/χρησιμοποιώ κάποιες εφαρμογές πού και πού", order: 1 },
            { id: 82, text: "Όχι, σχεδόν ποτέ – γνωρίζω τι είναι αλλά δεν τα χρησιμοποιώ πρακτικά", order: 2 },
            { id: 83, text: "Όχι, και δεν με ενδιαφέρει/δεν γνωρίζω τις εφαρμογές αυτές", order: 3 },
          ],
        },
        {
          id: 22,
          text: "Σε ποιους τομείς πιστεύετε ότι η τεχνητή νοημοσύνη θα έχει θετική επίδραση; (Επιλέξτε όσες επιλογές συμφωνούν με την άποψή σας)",
          questionType: "multipleChoice" as const,
          required: true,
          order: 21,
          answers: [
            { id: 84, text: "Υγεία: καλύτερες διαγνώσεις, εξατομικευμένες θεραπείες, βελτίωση υπηρεσιών υγείας", order: 0 },
            { id: 85, text: "Δημόσιες υπηρεσίες: αυτοματοποίηση διαδικασιών, ταχύτερη και διαφανέστερη εξυπηρέτηση πολιτών", order: 1 },
            { id: 86, text: "Εκπαίδευση: εξατομικευμένη μάθηση, νέα εκπαιδευτικά εργαλεία", order: 2 },
            { id: 87, text: "Οικονομία: ενίσχυση παραγωγικότητας, νέες επιχειρηματικές ευκαιρίες", order: 3 },
            { id: 88, text: "Καθημερινή ζωή: έξυπνες εφαρμογές στο σπίτι, μεταφορές, ψυχαγωγία κλπ.", order: 4 },
            { id: 89, text: "Κανένας συγκεκριμένος τομέας / Δεν βλέπω θετική επίδραση", order: 5 },
          ],
        },
      ],
    };

    const result = await storage.createSurveyPoll(
      surveyData.poll,
      surveyData.questions,
      surveyData.questions.map(q => ({
        questionId: q.id,
        answers: q.answers
      }))
    );

    console.log("Survey poll created successfully!");
    console.log("Poll ID:", result.id);
    console.log("Title:", result.title);
    console.log("Total questions:", surveyData.questions.length);
    
    process.exit(0);
  } catch (error) {
    console.error("Error creating survey:", error);
    process.exit(1);
  }
}

createGreekSurvey();
